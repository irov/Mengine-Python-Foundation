uniform sampler2D inSampler0;
uniform mediump float u_factor;

varying mediump vec4 v_Col;
varying highp vec2 v_UV0;

const vec3 REC709 = vec3(0.2126, 0.7152, 0.0722);

void main(void)
{
    mediump vec4 color = texture2D(inSampler0, v_UV0);

    mediump float l = dot(color.rgb, REC709);
    mediump vec4 grayscale = vec4(l, l, l, color.a);

    mediump vec4 saturated = mix(grayscale, color, u_factor);

    gl_FragColor = v_Col * saturated;
}